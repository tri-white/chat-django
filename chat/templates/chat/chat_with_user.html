<!-- chat/templates/chat/chat_with_user.html -->
{% extends 'base.html' %}

{% block content %}
<h2>Chat with {{ other_user.username }}</h2>

{% if last_activity %}
  <p>Last active: {{ last_activity|timesince }} ago</p>
{% endif %}
  <div id="chat-messages">
    {% for message in messages %}
      <p>{{ message.sender.username }} ({{ message.timestamp }}): {{ message.content }}</p>
    {% endfor %}
  </div>
  <!-- chat/templates/chat/chat_with_user.html -->
<form method="post" action="{% url 'send_message' other_user.id %}" id="message-form">
    {% csrf_token %}
    <input type="text" name="content" required>
    <button type="submit">Send</button>
</form>
  <script>
    // You can add JavaScript to handle real-time updates or use Django Channels for more advanced features.
  </script>
{% endblock %}
